<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#1e1e1e">
<title>Komprimering av bilder</title>
<meta name="description" content="Et verktøy som lar deg lett utføre ganske kraftig komprimering med bra resultat for bilder til nettsider. Kan lagre som webp eller jpg.">
<meta name="author" content="Johnny Heggelund">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://morepcfun.github.io/bildeoptimalisering/">
<link rel="icon" href="data:image/png;base64,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">
<style>
:root {
--background-color: #1a1b1e;
--surface-color: #2a2b2e;
--primary-color: #007bff;
--text-color: #f0f1f2;
--text-muted-color: #aaa;
--border-color: #444;
--success-color: #28a745;
}
body {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
background-color: var(--background-color);
color: var(--text-color);
margin: 0;
padding: 2rem;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
text-align: center;
min-height: 100vh;
gap: 2rem;
}
.container {
width: 100%;
max-width: 800px;
}
.upload-box {
background-color: var(--surface-color);
border: 2px dashed var(--border-color);
border-radius: 8px;
padding: 4rem 2rem;
cursor: pointer;
transition: background-color 0.2s, border-color 0.2s;
}
.upload-box.dragover {
border-color: var(--primary-color);
background-color: #333;
}
.upload-box h2 { margin: 0 0 0.5rem 0; pointer-events: none; }
.upload-box p { margin: 0; color: var(--text-muted-color); pointer-events: none; }
#file-input { display: none; }
.hidden { display: none !important; }
.results-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 1.5rem;
width: 100%;
}
.result-card {
background-color: var(--surface-color);
padding: 1.5rem;
border-radius: 8px;
}
.result-card h3 { margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 0.8rem; margin-bottom: 1rem; }
.stats { margin-bottom: 1.5rem; }
.stats .arrow { color: var(--primary-color); }
.stats strong { color: var(--success-color); }
.download-button {
display: inline-block;
background-color: var(--success-color);
color: white;
padding: 0.8rem 1.5rem;
border-radius: 4px;
text-decoration: none;
font-weight: bold;
transition: background-color 0.2s;
}
.download-button:hover { background-color: #218838; }
@media (max-width: 600px) {
.results-grid { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<div id="container" class="container">
<div id="upload-box" class="upload-box">
<h2>Last opp eller lim inn bilde</h2>
<p>Klikk her for å velge fil, eller bare lim inn (Ctrl+V) et bilde.</p>
</div>
<input type="file" id="file-input" accept="image/png, image/jpeg, image/webp">
<div id="results-grid" class="results-grid hidden">
<div class="result-card">
<h3>Resultat (WebP)</h3>
<p id="stats-webp" class="stats">Beregner...</p>
<a href="#" id="download-webp" class="download-button" download="">Last ned .webp</a>
</div>
<div class="result-card">
<h3>Resultat (JPEG)</h3>
<p id="stats-jpeg" class="stats">Beregner...</p>
<a href="#" id="download-jpeg" class="download-button" download="">Last ned .jpeg</a>
</div>
</div>
</div>
<script>
const WEBP_QUALITY = 0.25;
const JPEG_QUALITY = 0.30;
const fileInput = document.getElementById('file-input');
const uploadBox = document.getElementById('upload-box');
const resultsGrid = document.getElementById('results-grid');
const downloadWebp = document.getElementById('download-webp');
const downloadJpeg = document.getElementById('download-jpeg');
const statsWebp = document.getElementById('stats-webp');
const statsJpeg = document.getElementById('stats-jpeg');
function formatBytes(bytes) {
if (bytes === 0) return '0 Bytes';
const k = 1024;
const sizes = ['Bytes', 'KB', 'MB'];
const i = Math.floor(Math.log(bytes) / Math.log(k));
return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}
function processImage(fileOrBlob) {
if (!fileOrBlob) return;
const objectURL = URL.createObjectURL(fileOrBlob);
const image = new Image();
image.onload = () => {
const { naturalWidth: width, naturalHeight: height } = image;
const originalSize = fileOrBlob.size;
const timestamp = Date.now();
const baseFilename = fileOrBlob.name ? fileOrBlob.name.substring(0, fileOrBlob.name.lastIndexOf('.')) : 'bilde';
const uniqueFilename = `${baseFilename}-${timestamp}`;
const canvas = document.createElement('canvas');
canvas.width = width;
canvas.height = height;
const ctx = canvas.getContext('2d');
ctx.drawImage(image, 0, 0, width, height);
const webpDataURL = canvas.toDataURL('image/webp', WEBP_QUALITY);
const webpSize = atob(webpDataURL.split(',')[1]).length;
downloadWebp.href = webpDataURL;
downloadWebp.download = `${uniqueFilename}.webp`;
statsWebp.innerHTML = `<strong>${width}x${height}</strong><br>${formatBytes(originalSize)} <span class="arrow">&rarr;</span> <strong>${formatBytes(webpSize)}</strong>`;
ctx.fillStyle = '#FFFFFF';
ctx.fillRect(0, 0, width, height);
ctx.drawImage(image, 0, 0, width, height);
const jpegDataURL = canvas.toDataURL('image/jpeg', JPEG_QUALITY);
const jpegSize = atob(jpegDataURL.split(',')[1]).length;
downloadJpeg.href = jpegDataURL;
downloadJpeg.download = `${uniqueFilename}.jpeg`;
statsJpeg.innerHTML = `<strong>${width}x${height}</strong><br>${formatBytes(originalSize)} <span class="arrow">&rarr;</span> <strong>${formatBytes(jpegSize)}</strong>`;
URL.revokeObjectURL(objectURL);
resultsGrid.classList.remove('hidden');
uploadBox.classList.add('hidden');
};
image.onerror = () => {
alert("Kunne ikke laste bildefilen. Den kan være korrupt.");
URL.revokeObjectURL(objectURL);
};
image.src = objectURL;
}
uploadBox.addEventListener('click', () => fileInput.click());
fileInput.addEventListener('change', (e) => processImage(e.target.files[0]));
window.addEventListener('paste', e => {
const items = e.clipboardData?.items;
if (!items) return;
for (const item of items) {
if (item.type.includes('image')) {
processImage(item.getAsFile());
break;
}
}
});
uploadBox.addEventListener('dragover', (e) => { e.preventDefault(); uploadBox.classList.add('dragover'); });
uploadBox.addEventListener('dragleave', () => uploadBox.classList.remove('dragover'));
uploadBox.addEventListener('drop', (e) => {
e.preventDefault();
uploadBox.classList.remove('dragover');
if (e.dataTransfer.files.length > 0) processImage(e.dataTransfer.files[0]);
});
</script>
</body>
</html>